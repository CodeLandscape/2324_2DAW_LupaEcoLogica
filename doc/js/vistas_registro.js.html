<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: vistas/registro.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: vistas/registro.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Vista } from "./vista.js";

export class Registro extends Vista {
    constructor(controlador, base) {
        super(controlador, base);
        this.crearInterfaz();
        this.validacionFormulario();
    }
    /**
     * Crea la interfaz del formulario para guardar la partida.
     * Genera las acciones del formulario.
     */
    crearInterfaz() {
        // Obtener los elementos HTML existentes
        this.formulario = document.getElementById("miFormulario");
        this.explicacionRegex = document.createElement("p");
        this.explicacionRegex.className = "tamFuenteGrande";
        this.explicacionRegex.textContent = "El nombre de usuario debe contener las dos primeras iniciales de la provincia elegida. Por ejemplo, si seleccionas Badajoz, tu nombre sería BAvi123.";

        this.puntos = document.createElement("h2");
        this.puntos.textContent = "¡Has obtenido (cantidad de puntos) en tu partida!";

        this.irInicio = document.createElement("button");
        this.irInicio.textContent = "Volver al Inicio";

        this.nickUsu = document.getElementById('nombre');
        this.provincia = document.getElementById("localidad");

        this.nickUsu.style.backgroundColor = "yellow";

        // Agregar elementos al contenedor base
        this.base.appendChild(this.puntos);
        this.formulario.appendChild(this.explicacionRegex);
        this.base.appendChild(this.irInicio);

        // Al hacer clic en el botón, mostrar la vista correspondiente
        this.irInicio.onclick = () => {
            this.footer = document.getElementById("pie");
            this.footer.textContent = "Escuela Virgen de Guadalupe 2023";
            this.controlador.verVista(Vista.VISTA5);
        };
    }
    /**
     * Validación del formulario al escribir el nombre.
     */
    validacionFormulario() {
        this.nickUsu.style.backgroundColor = "yellow";

        const validarNombreUsuario = (texto, regex, mensajeValido, mensajeInvalido) => {
            if (!texto.match(regex)) {
                window.alert(mensajeInvalido);
                this.nickUsu.style.borderColor = "red";
            } else {
                window.alert(mensajeValido);
                this.nickUsu.style.borderColor = "green";
            }
        };

        this.formulario.onsubmit = (event) => {
            event.preventDefault(); // Evitar el envío del formulario

            const texto = this.nickUsu.value;

            switch (this.provincia.value) {
                case "Cáceres":
                    console.log("Cáceres");
                    validarNombreUsuario(
                        texto,
                        /^(CA|ca)[A-Za-z]{2}[0-9]{3}$/,
                        "El nombre de usuario es válido para Cáceres",
                        "No es válido el nombre introducido para Cáceres"
                    );
                    break;
                case "Badajoz":
                    validarNombreUsuario(
                        texto,
                        /^(BA|ba)[A-Za-z]{2}[0-9]{3}$/,
                        "El nombre de usuario es válido para Badajoz",
                        "No es válido el nombre introducido para Badajoz"
                    );
                    break;
                case "Mérida":
                    validarNombreUsuario(
                        texto,
                        /^(ME|me)[A-Za-z]{2}[0-9]{3}$/,
                        "El nombre de usuario es válido para Mérida",
                        "No es válido el nombre introducido para Mérida"
                    );
                    break;
                default:
                    // Si no se selecciona una provincia específica, se puede restablecer el estilo del campo de entrada
                    this.nickUsu.style.borderColor = "";
                    break;
            }
        };
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Controlador.html">Controlador</a></li><li><a href="IniciarTablero.html">IniciarTablero</a></li><li><a href="Inicio.html">Inicio</a></li><li><a href="Preguntas.html">Preguntas</a></li><li><a href="Ranking.html">Ranking</a></li><li><a href="Reflexiones.html">Reflexiones</a></li><li><a href="Vista.html">Vista</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Nov 24 2023 13:18:26 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
